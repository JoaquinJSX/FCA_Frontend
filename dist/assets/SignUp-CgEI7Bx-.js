import{u as w,r as o,j as r}from"./index-BWiGxLlE.js";const g="_container_utdq4_1",b="_form_utdq4_19",v="_footer_utdq4_63",E="_error_utdq4_113",a={container:g,form:b,footer:v,error:E};function N({users:h,setUsers:p,setUserLoggedIn:x}){const y=w(),[s,i]=o.useState({username:"",password:""}),[d,c]=o.useState(""),[f,u]=o.useState(""),t=o.useRef(null),n=o.useRef(null);o.useEffect(()=>{const e=l=>{l.key==="Enter"&&m()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[s.username,s.password]),o.useEffect(()=>{var e;s.password.length>0&&((e=t.current)==null||e.style.removeProperty("border"),u(""))},[s.password]),o.useEffect(()=>{var e;s.username.length>0&&((e=n.current)==null||e.style.removeProperty("border"),c(""))},[s.username]);function m(){s.username.length<5?(c("Username must have 5 characters at least"),n.current&&(n.current.focus(),n.current.style.outline="none",n.current.style.border="1px solid red")):h.some(e=>e.username===s.username)?(c("Please choose another username, this already exists"),n.current&&(n.current.focus(),n.current.style.outline="none",n.current.style.border="1px solid red")):s.password.length===0?(u("Enter a password"),t.current&&(t.current.focus(),t.current.style.outline="none",t.current.style.border="1px solid red")):s.password.length<4?(u("Password must have 4 characters at least"),t.current&&(t.current.focus(),t.current.style.outline="none",t.current.style.border="1px solid red")):fetch("https://fca-api-5k3h.onrender.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(()=>fetch("https://fca-api-5k3h.onrender.com")).then(e=>e.json()).then(e=>{p(e);const l=e.findIndex(j=>j.username===s.username);x(l),y("/finantial_control")}).catch(e=>console.log(e))}return r.jsx("div",{className:a.container,children:r.jsxs("main",{className:a.form,children:[r.jsx("h1",{children:"Create account"}),r.jsxs("form",{children:[r.jsx("label",{children:"Username:"}),r.jsx("br",{}),r.jsx("input",{type:"text",ref:n,value:s.username,onChange:e=>i({...s,username:e.target.value})}),r.jsx("br",{}),d&&r.jsx("p",{className:a.error,children:r.jsx("em",{children:d})}),r.jsx("label",{children:"Password:"}),r.jsx("br",{}),r.jsx("input",{type:"password",ref:t,value:s.password,onChange:e=>i({...s,password:e.target.value})}),f&&r.jsx("p",{className:a.error,children:r.jsx("em",{children:f})})]}),r.jsx("button",{onClick:m,children:"Create"}),r.jsx("br",{}),r.jsxs("footer",{className:a.footer,children:["Â© ",new Date().getFullYear()," Limitless"]})]})})}export{N as default};
